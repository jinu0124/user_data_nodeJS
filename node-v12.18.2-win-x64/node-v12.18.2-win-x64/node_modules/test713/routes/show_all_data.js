//var mariadbs = require('../mariadb_conn');

//router.get('/', function(req, res, next){
//	mariadbs.query('select * from user', function(err, rows, fields){
//		if(!err){
//			console.log(rows);
//			console.log(fields);
//			// res.send(result);
//		}
//		else{
//			res.send(err);
//		}
//	});
//});
//
//module.exports = router;

var pool = require('../mariadb_conn.js');

module.exports = function(){
	return{
		select: function(callback){
			pool.getConnection(function(err, con){
				var sql = 'select * from user';
				con.query(sql, function(err, result, fields){
					con.release();
					if(err)
						{
						return callback(err);
						}
					callback(null, result);
				});
			});
		},
		pool: pool
	}
};
