<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Withdraw Service</title>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script language="javascript">

      // $(document).ready(function()) DOM만 로드 후 Javascript 자동 실행. 별도의 onclick()이벤트 없이 실행.
      $(document).ready(function(){
        // getTextLength() 문자열 받아서 문자열의 길이를 반환하는 함수
        function getTextLength(str){
          var len = 0;
          for (var i = 0; i < str.length; i++) {
            if (escape(str.charAt(i)).length == 6) {
                len++;
            }
            len++;
          }
          return len;
        }

        $('.pass_phrase').change(function(){
          console.log($('.pass_phrase').val());
          var length_pw = getTextLength($('.pass_phrase').val());
          if(length_pw < 8 || length_pw > 16){
            console.log("8~16글자 사이의 비밀번호를 입력해주세요.");            
            $('#submit_button').attr("disabled", true);
          }
          else{
            $('#submit_button').attr("disabled", false);
          }
        })
      })
      
    </script>

    <style>
    .container{
      width: 1080px;
      margin: 0 auto;
      overflow: hidden;
    }
    </style>
  </head>

  <body>
    <div class="container">
      <form action="withdraw_check" method="post">
        <h2>정말로 회원 탈퇴를 하시겠습니까?</h2>
        <h3>회원님의 비밀번호를 입력해주세요.</h3> 
        
        <input class="pass_phrase" type="password" name="pw" style="width: 200px; height: 30px;" required>
        <p>8~16자 사이의 비밀번호.</p>
        <input type="hidden" name="client_id" value="<%= info['client_id']%>">
        <input id="submit_button" type="submit" value="탈퇴하기" disabled='disabled'>
      </form>
      
      <a href="javascript:history.back();">돌아가기</a>
    </div>
  </body>
</html>